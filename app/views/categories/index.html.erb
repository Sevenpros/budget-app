<p style="color: green"><%= notice %></p>

<h1>Categories</h1>

<div id="categories">
  <% @categories.each do |category| %>
  <% total_amount = Transaction.where(category_id: category.id).sum(:amouunt)%>
    <div id="<%= dom_id category %>">
      <p>
        <strong>Name:</strong>
        <%= category.name %>
      </p>

      <p>
        <strong>Icon:</strong>
        <%= image_tag category.icon_url if category.icon%>
      </p>
      <p>
        <strong>Transaction Amount:</strong>
         <%= number_to_currency(total_amount, :unit => "$")%> 
      </p>
    </div>
    <p>
      <%= link_to "Show this category", category_transactions_path(category) %>
    </p>
  <% end %>
</div>

<%= link_to "New category", new_category_path %>
